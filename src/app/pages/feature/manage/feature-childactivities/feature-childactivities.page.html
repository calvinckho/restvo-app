<ion-header>
  <ion-toolbar *ngIf="modalPage">
    <ion-buttons slot="start">
      <ion-button (click)="closeModal()"><ion-icon name="chevron-back-outline"></ion-icon></ion-button>
    </ion-buttons>
    <ion-title>{{this.categoryLabel}}</ion-title>
  </ion-toolbar>
  <ion-toolbar *ngIf="activities && categoryId !== '5c915476e172e4e64590e349'"> <!--Show always except in Plans-->
    <ion-item [ngStyle]="{'font-size': platform.width() < 400 ? '11px' : '14px'}" lines="none">
      <div class="select-col"></div>
      <div class="user-col column-label" (click)="sortDisplay('activity')">{{this.categoryLabel}}<ion-icon [name]="activityAscending === true ? 'chevron-down-outline' : 'chevron-up-outline'"></ion-icon></div>
      <div class="status-col column-label" (click)="sortDisplay('share')">Sharing<ion-icon [name]="shareAscending === true ? 'chevron-down-outline' : 'chevron-up-outline'"></ion-icon></div>
      <div class="actions-col column-label">Actions</div>
    </ion-item>
  </ion-toolbar>
</ion-header>

<ion-content>
  <ion-list *ngIf="categoryId !== '5c915476e172e4e64590e349'"> <!--Show except in Plans-->
    <ion-item *ngFor="let activity of activities; index as i" (click)="openChildActivity($event, activity, 'view')" [hidden]="!((activity.matrix_string[0][0].toLowerCase().indexOf(searchKeyword.toLowerCase()) > -1 || activity.resource['en-US'].value[0].toLowerCase().indexOf(searchKeyword.toLowerCase()) > -1))">
      <ion-buttons class="select-col">
        <ion-button (click)="selectParticipant($event, activity)" fill="clear" *ngIf="!activity.select">
          <ion-icon color="tertiary" name="radio-button-off"></ion-icon>
        </ion-button>
        <ion-button (click)="unselectParticipant($event, activity)" fill="clear" *ngIf="activity.select" >
          <ion-icon color="tertiary" name="checkmark-circle"></ion-icon>
        </ion-button>
      </ion-buttons>
      <div class="user-col" *ngIf="platform.width() < 992">
        <ion-avatar class="user-avatar">
          <ion-img [src]="(activity.assets && activity.assets.length && activity.assets[0]) | background: activity._id"></ion-img>
        </ion-avatar>
        <ion-label class="name-label ion-text-center ion-text-wrap">
          {{activity.matrix_string[0][0]}}
        </ion-label>
      </div>
      <div class="avatar-col" *ngIf="platform.width() >= 992">
        <ion-avatar class="user-avatar">
          <ion-img [src]="(activity.assets && activity.assets.length && activity.assets[0]) | background: activity._id"></ion-img>
        </ion-avatar>
      </div>
      <div class="name-col" *ngIf="platform.width() >= 992">
        <ion-label class="name-label ion-text-wrap">
          {{activity.matrix_string[0][0]}}
        </ion-label>
      </div>
      <div class="ion-text-wrap status-col column-label" style="font-size: 8px"><span *ngIf="activity.array_boolean[1]">Share in Marketplace</span></div>
      <ion-buttons class="actions-col ion-justify-content-evenly">
        <ion-button (click)="openChildActivity($event, activity, 'manage')" fill="clear"><ion-icon name="key-outline"></ion-icon></ion-button>
        <ion-button (click)="openChildActivity($event, activity, 'edit')" fill="clear"><ion-icon name="build-outline"></ion-icon></ion-button>
        <ion-button (click)="pushToMessagePage($event, activity)" fill="clear"><ion-icon name="chatbubbles-outline"></ion-icon></ion-button>
      </ion-buttons>
    </ion-item>
  </ion-list>
  <ion-grid class="full-height" *ngIf="categoryId === '5c915476e172e4e64590e349'"> <!--For Plans-->
    <ion-row class="full-height grid-row ion-align-items-center" *ngIf="planPage === 'createOrChoose'">
      <ion-grid>
        <ion-row class="ion-justify-content-start">
          <ion-col size-xs="12" size-sm="6">
            <ion-card class="category-card" mode="md" (click)="planPage = 'create'">
              <ion-card-header>
                <ion-card-title>Create a New Plan</ion-card-title>
              </ion-card-header>
              <ion-card-content>
                <li>Embark on a Journey of Growth</li>
              </ion-card-content>
            </ion-card>
          </ion-col>
          <ion-col size-xs="12" size-sm="6">
            <ion-card class="category-card" mode="md" (click)="chooseNewPlan()">
              <ion-card-header>
                <ion-card-title>Choose from Available Template</ion-card-title>
              </ion-card-header>
              <ion-card-content>
                <li>Grow with the Guidance from a Mentor</li>
              </ion-card-content>
            </ion-card>
          </ion-col>
        </ion-row>
      </ion-grid>
    </ion-row>
  </ion-grid>
</ion-content>
