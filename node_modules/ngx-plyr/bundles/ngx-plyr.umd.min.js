!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("plyr"),require("rxjs"),require("rxjs/operators"),require("@angular/core")):"function"==typeof define&&define.amd?define("ngx-plyr",["exports","plyr","rxjs","rxjs/operators","@angular/core"],e):e(t["ngx-plyr"]={},t.Plyr,t.rxjs,t.rxjs.operators,t.ng.core)}(this,function(t,e,n,p,r){"use strict";e=e&&e.hasOwnProperty("default")?e["default"]:e;var i=function(){function t(){}return t.prototype.create=function(t){return new e(t.videoElement,t.options)},t.prototype.updateSource=function(t){t.plyr.source=t.source},t.prototype.destroy=function(t){t.plyr.destroy()},t}(),y=function(){function t(t,e,r){this.elementRef=t,this.ngZone=e,this.renderer=r,this.playerChange=new n.BehaviorSubject(null),this.events=new Map,this.plyrType="video",this.plyrInit=this.playerChange.pipe(p.filter(function(t){return!!t})),this.plyrProgress=this.createLazyEvent("progress"),this.plyrPlaying=this.createLazyEvent("playing"),this.plyrPlay=this.createLazyEvent("play"),this.plyrPause=this.createLazyEvent("pause"),this.plyrTimeUpdate=this.createLazyEvent("timeupdate"),this.plyrVolumeChange=this.createLazyEvent("volumechange"),this.plyrSeeking=this.createLazyEvent("seeking"),this.plyrSeeked=this.createLazyEvent("seeked"),this.plyrRateChange=this.createLazyEvent("ratechange"),this.plyrEnded=this.createLazyEvent("ended"),this.plyrEnterFullScreen=this.createLazyEvent("enterfullscreen"),this.plyrExitFullScreen=this.createLazyEvent("exitfullscreen"),this.plyrCaptionsEnabled=this.createLazyEvent("captionsenabled"),this.plyrCaptionsDisabled=this.createLazyEvent("captionsdisabled"),this.plyrLanguageChange=this.createLazyEvent("languagechange"),this.plyrControlsHidden=this.createLazyEvent("controlshidden"),this.plyrControlsShown=this.createLazyEvent("controlsshown"),this.plyrReady=this.createLazyEvent("ready"),this.plyrLoadStart=this.createLazyEvent("loadstart"),this.plyrLoadedData=this.createLazyEvent("loadeddata"),this.plyrLoadedMetadata=this.createLazyEvent("loadedmetadata"),this.plyrQualityChange=this.createLazyEvent("qualitychange"),this.plyrCanPlay=this.createLazyEvent("canplay"),this.plyrCanPlayThrough=this.createLazyEvent("canplaythrough"),this.plyrStalled=this.createLazyEvent("stalled"),this.plyrWaiting=this.createLazyEvent("waiting"),this.plyrEmptied=this.createLazyEvent("emptied"),this.plyrCueChange=this.createLazyEvent("cuechange"),this.plyrError=this.createLazyEvent("error"),this.plyrStateChange=this.createLazyEvent("statechange"),this.subscriptions=[]}return Object.defineProperty(t.prototype,"player",{get:function(){return this.playerChange.getValue()},enumerable:!0,configurable:!0}),t.prototype.ngOnChanges=function(e){var r=this;this.subscriptions.push(this.plyrInit.pipe(p.first()).subscribe(function(t){e.plyrOptions?e.plyrOptions.firstChange||r.initPlyr(!0):r.updatePlyrSource(t)}))},t.prototype.ngOnDestroy=function(){this.destroyPlayer(),this.subscriptions.forEach(function(t){return t.unsubscribe()})},t.prototype.ngAfterViewInit=function(){this.initPlyr()},t.prototype.initPlyr=function(t){var e=this;void 0===t&&(t=!1),!t&&this.player||this.ngZone.runOutsideAngular(function(){e.destroyPlayer(),e.driver=e.plyrDriver||new i,e.ensureVideoElement();var t=e.driver.create({videoElement:e.videoElement,options:e.plyrOptions});e.updatePlyrSource(t),e.playerChange.next(t)})},t.prototype.updatePlyrSource=function(t){this.driver.updateSource({videoElement:this.videoElement,plyr:t,source:{type:this.plyrType,title:this.plyrTitle,sources:this.plyrSources,poster:this.plyrPoster,tracks:this.plyrTracks}})},t.prototype.createLazyEvent=function(t){var r=this;return this.plyrInit.pipe(p.switchMap(function(){return new n.Observable(function(e){return r.on(t,function(t){return r.ngZone.run(function(){return e.next(t)})})})}))},t.prototype.destroyPlayer=function(){var e=this;this.player&&(Array.from(this.events.keys()).forEach(function(t){return e.off(t)}),this.driver.destroy({plyr:this.player}),this.videoElement=null)},Object.defineProperty(t.prototype,"hostElement",{get:function(){return this.elementRef.nativeElement},enumerable:!0,configurable:!0}),t.prototype.ensureVideoElement=function(){var t=this.hostElement.querySelector("video");t?this.videoElement=t:(this.videoElement=this.renderer.createElement("video"),this.videoElement.controls=!0,this.videoElement.setAttribute("crossorigin",""),this.videoElement.setAttribute("playsinline",""),this.renderer.appendChild(this.hostElement,this.videoElement))},t.prototype.on=function(t,e){this.events.set(t,e),this.player.on(t,e)},t.prototype.off=function(t){this.player.off(t,this.events.get(t)),this.events["delete"](t)},t.decorators=[{type:r.Component,args:[{selector:"plyr, [plyr]",template:"",exportAs:"plyr",styles:[""]}]}],t.ctorParameters=function(){return[{type:r.ElementRef},{type:r.NgZone},{type:r.Renderer2}]},t.propDecorators={plyrDriver:[{type:r.Input}],plyrType:[{type:r.Input}],plyrTitle:[{type:r.Input}],plyrPoster:[{type:r.Input}],plyrSources:[{type:r.Input}],plyrTracks:[{type:r.Input}],plyrOptions:[{type:r.Input}],vr:[{type:r.ViewChild,args:["v"]}],plyrInit:[{type:r.Output}],plyrProgress:[{type:r.Output}],plyrPlaying:[{type:r.Output}],plyrPlay:[{type:r.Output}],plyrPause:[{type:r.Output}],plyrTimeUpdate:[{type:r.Output}],plyrVolumeChange:[{type:r.Output}],plyrSeeking:[{type:r.Output}],plyrSeeked:[{type:r.Output}],plyrRateChange:[{type:r.Output}],plyrEnded:[{type:r.Output}],plyrEnterFullScreen:[{type:r.Output}],plyrExitFullScreen:[{type:r.Output}],plyrCaptionsEnabled:[{type:r.Output}],plyrCaptionsDisabled:[{type:r.Output}],plyrLanguageChange:[{type:r.Output}],plyrControlsHidden:[{type:r.Output}],plyrControlsShown:[{type:r.Output}],plyrReady:[{type:r.Output}],plyrLoadStart:[{type:r.Output}],plyrLoadedData:[{type:r.Output}],plyrLoadedMetadata:[{type:r.Output}],plyrQualityChange:[{type:r.Output}],plyrCanPlay:[{type:r.Output}],plyrCanPlayThrough:[{type:r.Output}],plyrStalled:[{type:r.Output}],plyrWaiting:[{type:r.Output}],plyrEmptied:[{type:r.Output}],plyrCueChange:[{type:r.Output}],plyrError:[{type:r.Output}],plyrStateChange:[{type:r.Output}]},t}(),a=function(){function t(){}return t.decorators=[{type:r.NgModule,args:[{declarations:[y],exports:[y]}]}],t}();t.DefaultPlyrDriver=i,t.PlyrComponent=y,t.PlyrModule=a,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=ngx-plyr.umd.min.js.map